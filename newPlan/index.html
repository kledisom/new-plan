<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        display: flex;
		flex-direction: column;
        justify-content: center;
		align-items: center;
		

        background-color: #161616;
        color: #fff;
      }
      form {
        background-color: darkorchid;
		background-image: linear-gradient(right, #00537e, #3aa17e);
        height: 500px;
        width: 400px;
		 border-radius: 10px;
		
      }
	  form label {
	   margin: 10px;
	  }
	  
	  form input {
	   height: 20px;
	   width: 100px;
	   margin-left: 10px;
	  }
	  
	  form div {
	   display: flex;
	   justify-content: center;
	   align-items: center;
	   border: 3px solid #000;
	   margin: 10px;
	  }
	  
      .state {
        height: 30px;
        width: 50px;
        background-color: red;
      }
      #conf {
        display: none;
      }
	  .form-btn {
	   display: flex;
	   flex-direction: column;
	   justify-content: center;
	   align-items: center;
	   margin: 50px;
	  
	   border: 1px solid #000;
	   height: 100px;
	  }
	  .form-btn input {
	   height: 50px;
	   width: 80px;
	   margin: 10px;
	  }
	  
	  a {
		font-size: 20px;
	  }
	  
	  a:hover {
	   background-color: #000;
	  }
	  
	  
    </style>
  </head>
  <body>
    <form action="">
      <label for="">TOALHA 01</label>
      <div>
        <input type="text" value="" placeholder="largura" />
        <input type="text" value="" placeholder="comprimento" />
        <div class="state"></div>
      </div>
      <label for="">TOALHA 02</label>
      <div>
        <input type="text" value="" placeholder="largura" />
        <input type="text" value="" placeholder="comprimento" />
        <div class="state"></div>
      </div>
      <label for="">TOALHA 03</label>
      <div>
        <input type="text" value="" placeholder="largura" />
        <input type="text" value="" placeholder="comprimento" />
        <div class="state"></div>
      </div>
	  <div class="form-btn">
		  <input type="button" id="sav" value="Salvar" onclick="save()" />
          <input type="button" id="conf" value="Confirmar" onclick="confirm()" />
		  <a href="./pages/relatorio.html">acompanhar relat√≥rio</a>
	  </div>
     
    </form>

    <script>
      const log = console.log;

      /*
      /C = comprimento
      //1 = numero da toalha
      ///1 = ID
      */

      var felpa = [
        { art: 3, dim01: 77.5, dim02: 1.38 },
        { art: 9, dim01: 47, dim02: 0.68 },
        { art: 7, dim01: 80, dim02: 1.38 },
        { art: 25, dim01: 47, dim02: 0.68 },
        { art: 15, dim01: 80, dim02: 1.46 },
        { art: 23, dim01: 47, dim02: 0.68 },
        { art: 17, dim01: 72, dim02: 1.18 },
        { art: 19, dim01: 47, dim02: 0.63 },
        { art: 26, dim01: 77.5, dim02: 1.38 },
        { art: 29, dim01: 47, dim02: 0.78 },
        { art: 27, dim01: 77.5, dim02: 1.38 },
        { art: 30, dim01: 47, dim02: 0.78 },
        { art: 28, dim01: 77.5, dim02: 1.33 },
        { art: 31, dim01: 82, dim02: 1.68 },
        { art: 32, dim01: 47, dim02: 0.78 },
        { art: 33, dim01: 72, dim02: 1.18 },
        { art: 34, dim01: 47, dim02: 0.63 },
        { art: 35, dim01: 72, dim02: 1.18 },
        { art: 36, dim01: 47, dim02: 0.63 },
        { art: 37, dim01: 47, dim02: 0.78 },
        { art: 38, dim01: 77.5, dim02: 1.38 },
        { art: 39, dim01: 47, dim02: 0.78 },
        { art: 40, dim01: 47, dim02: 0.78 },
        { art: 41, dim01: 82, dim02: 1.48 },
        { art: 42, dim01: 77, dim02: 1.35 },
        { art: 43, dim01: 47, dim02: 0.8 },
      ];
      log(felpa);

      var artigo = 9; //flag
	  let cor1 = [];
      

      function verification(l, c, d1, d2, n) {
        if (l == d1 && c == d2) {
          log("largura OK");
          const state = document.getElementsByClassName("state");
          state[n].style.backgroundColor = "green";
		  cor1.push('verde');
        } else {
          log("ERROR");
		  cor1.push('blue');
        }
		
      }
      
      function save() {
        let larg01 = parseFloat(document.querySelectorAll("input")[0].value);
        let comp01 = parseFloat(document.querySelectorAll("input")[1].value);
        /**/
        let larg02 = parseFloat(document.querySelectorAll("input")[2].value);
        let comp02 = parseFloat(document.querySelectorAll("input")[3].value);
        /**/
        let larg03 = parseFloat(document.querySelectorAll("input")[4].value);
        let comp03 = parseFloat(document.querySelectorAll("input")[5].value);
        switch (artigo) {
          case 3:
            verification(larg01, comp01, felpa[0].dim01, felpa[0].dim02, 0);
            verification(larg02, comp02, felpa[0].dim01, felpa[0].dim02, 1);
            verification(larg03, comp03, felpa[0].dim01, felpa[0].dim02, 2);
            break;
          case 9:
            verification(larg01, comp01, felpa[1].dim01, felpa[1].dim02, 0);
            verification(larg02, comp02, felpa[1].dim01, felpa[1].dim02, 1);
            verification(larg03, comp03, felpa[1].dim01, felpa[1].dim02, 2);
            break;
          case 7:
            verification(larg01, comp01, felpa[2].dim01, felpa[2].dim02, 0);
            verification(larg02, comp02, felpa[2].dim01, felpa[2].dim02, 1);
            verification(larg03, comp03, felpa[2].dim01, felpa[2].dim02, 2);
            break;
          case 25:
            verification(larg01, comp01, felpa[3].dim01, felpa[3].dim02, 0);
            verification(larg02, comp02, felpa[3].dim01, felpa[3].dim02, 1);
            verification(larg03, comp03, felpa[3].dim01, felpa[3].dim02, 2);
            break;
          case 15:
            verification(larg01, comp01, felpa[4].dim01, felpa[4].dim02, 0);
            verification(larg02, comp02, felpa[4].dim01, felpa[4].dim02, 1);
            verification(larg03, comp03, felpa[4].dim01, felpa[4].dim02, 2);
            break;
          case 23:
            verification(larg01, comp01, felpa[5].dim01, felpa[5].dim02, 0);
            verification(larg02, comp02, felpa[5].dim01, felpa[5].dim02, 1);
            verification(larg03, comp03, felpa[5].dim01, felpa[5].dim02, 2);
            break;
          case 17:
            verification(larg01, comp01, felpa[6].dim01, felpa[6].dim02, 0);
            verification(larg02, comp02, felpa[6].dim01, felpa[6].dim02, 1);
            verification(larg03, comp03, felpa[6].dim01, felpa[6].dim02, 2);
            break;
          case 19:
            verification(larg01, comp01, felpa[7].dim01, felpa[7].dim02, 0);
            verification(larg02, comp02, felpa[7].dim01, felpa[7].dim02, 1);
            verification(larg03, comp03, felpa[7].dim01, felpa[7].dim02, 2);
            break;
          case 26:
            verification(larg01, comp01, felpa[8].dim01, felpa[8].dim02, 0);
            verification(larg02, comp02, felpa[8].dim01, felpa[8].dim02, 1);
            verification(larg03, comp03, felpa[8].dim01, felpa[8].dim02, 2);
            break;
          case 29:
            verification(larg01, comp01, felpa[9].dim01, felpa[9].dim02, 0);
            verification(larg02, comp02, felpa[9].dim01, felpa[9].dim02, 1);
            verification(larg03, comp03, felpa[9].dim01, felpa[9].dim02, 2);
            break;
          case 27:
            verification(larg01, comp01, felpa[10].dim01, felpa[10].dim02, 0);
            verification(larg02, comp02, felpa[10].dim01, felpa[10].dim02, 1);
            verification(larg03, comp03, felpa[10].dim01, felpa[10].dim02, 2);
            break;
          case 30:
            verification(larg01, comp01, felpa[11].dim01, felpa[11].dim02, 0);
            verification(larg02, comp02, felpa[11].dim01, felpa[11].dim02, 1);
            verification(larg03, comp03, felpa[11].dim01, felpa[11].dim02, 2);
            break;
          case 28:
            verification(larg01, comp01, felpa[12].dim01, felpa[12].dim02, 0);
            verification(larg02, comp02, felpa[12].dim01, felpa[12].dim02, 1);
            verification(larg03, comp03, felpa[12].dim01, felpa[12].dim02, 2);
            break;
          case 31:
            verification(larg01, comp01, felpa[13].dim01, felpa[13].dim02, 0);
            verification(larg02, comp02, felpa[13].dim01, felpa[13].dim02, 1);
            verification(larg03, comp03, felpa[13].dim01, felpa[13].dim02, 2);
            break;
          case 32:
            verification(larg01, comp01, felpa[14].dim01, felpa[14].dim02, 0);
            verification(larg02, comp02, felpa[14].dim01, felpa[14].dim02, 1);
            verification(larg03, comp03, felpa[14].dim01, felpa[14].dim02, 2);
            break;
          case 33:
            verification(larg01, comp01, felpa[15].dim01, felpa[15].dim02, 0);
            verification(larg02, comp02, felpa[15].dim01, felpa[15].dim02, 1);
            verification(larg03, comp03, felpa[15].dim01, felpa[15].dim02, 2);
            break;
          case 34:
            verification(larg01, comp01, felpa[16].dim01, felpa[16].dim02, 0);
            verification(larg02, comp02, felpa[16].dim01, felpa[16].dim02, 1);
            verification(larg03, comp03, felpa[16].dim01, felpa[16].dim02, 2);
            break;
          case 35:
            verification(larg01, comp01, felpa[17].dim01, felpa[17].dim02, 0);
            verification(larg02, comp02, felpa[17].dim01, felpa[17].dim02, 1);
            verification(larg03, comp03, felpa[17].dim01, felpa[17].dim02, 2);
            break;
          case 36:
            verification(larg01, comp01, felpa[18].dim01, felpa[18].dim02, 0);
            verification(larg02, comp02, felpa[18].dim01, felpa[18].dim02, 1);
            verification(larg03, comp03, felpa[18].dim01, felpa[18].dim02, 2);
            break;
          case 37:
            verification(larg01, comp01, felpa[19].dim01, felpa[19].dim02, 0);
            verification(larg02, comp02, felpa[19].dim01, felpa[19].dim02, 1);
            verification(larg03, comp03, felpa[19].dim01, felpa[19].dim02, 2);
            break;
          case 38:
            verification(larg01, comp01, felpa[20].dim01, felpa[20].dim02, 0);
            verification(larg02, comp02, felpa[20].dim01, felpa[20].dim02, 1);
            verification(larg03, comp03, felpa[20].dim01, felpa[20].dim02, 2);
            break;
          case 39:
            verification(larg01, comp01, felpa[21].dim01, felpa[21].dim02, 0);
            verification(larg02, comp02, felpa[21].dim01, felpa[21].dim02, 1);
            verification(larg03, comp03, felpa[21].dim01, felpa[21].dim02, 2);
            break;
          case 40:
            verification(larg01, comp01, felpa[22].dim01, felpa[22].dim02, 0);
            verification(larg02, comp02, felpa[22].dim01, felpa[22].dim02, 1);
            verification(larg03, comp03, felpa[22].dim01, felpa[22].dim02, 2);
            break;
          case 41:
            verification(larg01, comp01, felpa[23].dim01, felpa[23].dim02, 0);
            verification(larg02, comp02, felpa[23].dim01, felpa[23].dim02, 1);
            verification(larg03, comp03, felpa[23].dim01, felpa[23].dim02, 2);
            break;
          case 42:
            verification(larg01, comp01, felpa[24].dim01, felpa[24].dim02, 0);
            verification(larg02, comp02, felpa[24].dim01, felpa[24].dim02, 1);
            verification(larg03, comp03, felpa[24].dim01, felpa[24].dim02, 2);
            break;
          case 43:
            verification(larg01, comp01, felpa[25].dim01, felpa[25].dim02, 0);
            verification(larg02, comp02, felpa[25].dim01, felpa[25].dim02, 1);
            verification(larg03, comp03, felpa[25].dim01, felpa[25].dim02, 2);
            break;

          default:
            log("!!!!!!");
        }
        document.getElementById("conf").style.display = "block";
        document.getElementById("sav").style.display = "none";
      }

      <!-- function confirm() { -->
        <!-- let larg01 = parseFloat(document.querySelectorAll("input")[0].value); -->
        <!-- let comp01 = parseFloat(document.querySelectorAll("input")[1].value); -->
        <!-- /**/ -->
        <!-- let larg02 = parseFloat(document.querySelectorAll("input")[2].value); -->
        <!-- let comp02 = parseFloat(document.querySelectorAll("input")[3].value); -->
        <!-- /**/ -->
        <!-- let larg03 = parseFloat(document.querySelectorAll("input")[4].value); -->
        <!-- let comp03 = parseFloat(document.querySelectorAll("input")[5].value); -->

        <!-- localStorage.setItem("l.1.1", larg01); -->
        <!-- localStorage.setItem("c.1.1", comp01); -->

        <!-- localStorage.setItem("l.2.1", larg02); -->
        <!-- localStorage.setItem("c.2.1", comp02); -->

        <!-- localStorage.setItem("l.3.1", larg03); -->
        <!-- localStorage.setItem("c.3.1", comp03); -->
        <!-- log("ok"); -->
        <!-- document.getElementById("conf").style.display = "none"; -->
        <!-- document.getElementById("sav").style.display = "block"; -->
      <!-- } -->

	const request = window.indexedDB.open('meudb', 5);
	
	var db;
	
	request.onerror = function(event) {
	 log("erro ao abrir o banco de dados")
	}
	
	request.onupgradeneeded = function(event) {
	 log("atualizando banco de dados....");
	 db = event.target.result;
	 var objectStore = db.createObjectStore("estudantes", {keyPath: "teste"}); 
	}
	
	request.onsuccess = function(event) {
	 log("banco aberto com sucesso")
	 db = event.target.result;
	 
	 var transaction = db.transaction(["estudantes"], "readwrite");
	 
	 transaction.oncomplete = function(event) {
	     log("sucesso");
		};
		
     transaction.onerror = function(event) {
	     log("error");
		};	

		<!-- var Store = transaction.objectStore("estudantes"); -->
		<!-- Store.add({teste: '16', nome: 'j'}); -->
		

	}
	
	    function confirm() {
		
		 var contador = parseInt(localStorage.getItem('geradorId'));
		 var valor = parseInt(contador + 1);
		 var gerador = localStorage.setItem('geradorId', valor);
		
		 log(contador);
		
		var transaction = db.transaction(["estudantes"], "readwrite");
		
        let larg01 = parseFloat(document.querySelectorAll("input")[0].value);
        let comp01 = parseFloat(document.querySelectorAll("input")[1].value);
        /**/
        let larg02 = parseFloat(document.querySelectorAll("input")[2].value);
        let comp02 = parseFloat(document.querySelectorAll("input")[3].value);
        /**/
        let larg03 = parseFloat(document.querySelectorAll("input")[4].value);
        let comp03 = parseFloat(document.querySelectorAll("input")[5].value);


		var Store = transaction.objectStore("estudantes");
		Store.add({
		teste: valor,
		a: larg01, c1: cor1[0],
		b: comp01, 
		c: larg02, c2: cor1[1],
		d: comp02,
		e: larg03, c3: cor1[2],
		f: comp03});

        document.getElementById("conf").style.display = "none";
        document.getElementById("sav").style.display = "block";
		
		log(cor1)
		
		cor1 = [];
		
      }
	
	

    </script>
  </body>
</html>
